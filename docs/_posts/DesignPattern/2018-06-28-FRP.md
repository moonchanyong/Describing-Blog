---
layout: post
title: FRP 입문자를 위한 종합 안내서 - 공부
category: [ DesignPattern ]
tags: [ Functional, Reactive, FRP ]
---

# 함수형 반응형 프로그래밍


FRP 입문자를 위한 종합 안내서를 공부하면서 기술하기 위한 글

## 1장 FRP의 필요성

### 프로젝트 복잡도의 벽
```
기존의 상태머신에서 복잡도가 높아지는 문제, 추상화 등의 개념으로 해결을 체계를 만들어도 복잡도는 올라가는 문제를 해결이 팔요함
```
#### 복잡도에 맞닿았을 때 방법

1. 진행을 보류
2. 처음부터 다시 시작
3. 회사에서 인력 보강, 생산성이 엉망이 되고 끝없는나락에 빠진다고 한다.
4. 대규모 리팩터링을 통해 관리가 가능한 코드로 탄생 (가장 합리적 선택)

```
이러한 문제에서 리팩터링을 극복하기위한 방법으로 함수형 반응형 프로그래밍은 리팩터링과 잘어우러지는 스타일이다. (방법론이 아니다)
```
### 함수형 반응형 프로그래밍이란?

* 관찰자 패턴을 대치한다. (리스너, 콜백 등)
* FRP는 이벤트 위주의 로직을 조합 가능한 모듈로 코딩하는 방법
* FRP는 다른방식으로 사고, 입력에 대한 반응 또는 데이터의 흐름으로 표현
* FRP는 프로그램 상태를 관리하는 데 질서를 부여(의존성에 의한 순서 자동화로 동시성)


#### 엄격한 FRP 정의
```
1. 표시적: 각각의 타입과 구성요소의 의미를 정확히 지정해주는 엄밀하고 단순하며, 구현과는 무관한 함성 가능한 의미론을 기초로 FRP가 이루어져야 한다.(선언적, 합성성{FP의 성질을 많이 따온듯 하다})
2. 시간 연속적
```
##### 합성성
```
합성성은 소프트웨어 설계에서 자주 요구되는 조합성이라는 개념을 수학적으로 더 정확하게 표현한 형태이다.
```

### 그럼 FP, RP와 다른점이 무엇인가?

```
FP: 수학적 의미의 함수에 기반한 프로그래밍 방식 또는 패러다임
함수형 프로그래밍은 공유된 변경 가능한 상태를 의도적으로 회피하여 불편 데이터구조를 사용한다.
함수형 프로그래밍은 합성성을 강조한다.
```

```
RP: 전통적인 제어의 흐름이 아니라 이벤트 기반의 입력에 반응하여 동작하는 데이터의 흐름으로 보는것을 뜻하는 광범위한 용어
이러한 목표를 위하여 어떻게 달성해야 하는지는 기술하고 있지 않다.
```

```
FRP: 반응형 프로그래밍을 달성하기 위해 함수형 프로그래밍의 규칙을 따르도록 강제하는 구체적인 방법
```

#### 띠용한거
```
RX는 진정한 FRP가 아니다(표지적, 시간연속적)
RX는 주로 이벤트 핸들러를 사슬처럼 엮는데 관심이 있고, 다양하게 엮는 방법을 제공한다(operator)
```

### 그래서 이벤트란 무엇인가

#### 애플리케이션의 구조를 잡을때 두 프로그래밍 모델 중 하나를 중심으로 잡거나 둘을 혼합한다
* 스레드: 상태 변화를 제어 흐름으로 모델링한다. **스레드는 상태 변화 순서가 명확히 정의될 때**나 IO에 잘 어울리는 경향이 있다.
* 이벤트: 프로그램에서 전파되는 이산적이고 비동기적인 메시지. **이벤트는 순서가 덜 명확할 때** 적합하다

***(생략, 함수형에 해당하는 설명이 많으므로)***

-----

## 2장 FRP의 핵심

### 스트림 타입

```
FRP는 두개의 타입을 기반으로 한다.
1. 셀: 시간에 따라 변할 수 있는 값을 표현(상태 모델링)
2. 스트림: 이벤트의 흐름을 표현(상태전이 모델링)
```

* 이벤트: 프로그램의 한 부분에서 다른부부능로 비동기적으로 메시지를 전달하는 것

### FRP 구성요소

* 연산 스트림이나 셀을 다른 스트림이나 셀로 변환하는 함수나 코드
* 기본 연산 기초적인 연산, 다른 연산자를 조합해 표현할수 없는 연산: map, merge, hold, snapshow, filter, lift, never, constant, sample, switch 10가지

**이러한 조합을 이용하여 합성성이라는 특성을 보장한다.**

#### I/O와 로직 분리 (필수)

#### 참조투명성이 필요

```
FRP가 제대로 작동하려면 맵에 전달하는 함수가 반드시 참조 투명성을 보장해야한다.
=> 함수형의 순수함수, 부수효과를 멀리하고 동시성을 얻기위하여, 합성성도 얻기위함
```

### CELL타입: 시간에 따라 변하는 값: 상태를 모델링

### 동시 이벤트

```
FRP 처리가 트랜잭션 컨텍스트에서 일어난다.
동시이벤트: 둘 이상의 스트림 이벤트가 한 트랜잭션 안에서 발생하는 것, 같은 트랜잭션 안에 있는 이벤트의 선후관계를 이야기 할 수 없기 때문에 이러한 이벤트는 동시적이벤트
```

#### 동시 이벤트 다루기
```
FRP 시스템마다 동시 이벤트를 합치는 나름의 정책이 있다.
소듐의 경우, 동시에벤트를 위하여 더이상 입력이 들어오지 않는다는 확신이 들 때까지 템프레 이벤트를 넣어둔다.
동시에 두 이벤트를 받았다면, 제공받은 함수를 사용해 두 이벤트를 합친다.
```


### RX는 동시성이벤트를 어떻게 처리하나(왜 RX는 FRP가 아닌가)
[RXJS 참조](https://www.slideshare.net/jeokrang/rx-70197043)

```
Rxjs는 어쩌면 함수형이고, 어쩌면 반응형이지만 FRP는 아니다
왜냐? FRP는 continous-time을 처리한다(아주 짧은 시간의 차이를 둔 데이터가 한 트랜잭션에 안에 있다면 둘은 동시에 발생한것으로 처리)
하지만 RX는 여기서 시간을 제외하고 쌍대성을 이용하여 동시성을 매개변수화 하여 처리하였다.
RX는 구성성이 떨어지는데 이산적으로 이벤트가 발생해서이다.

=> RX는 FRP가 아니라고 한다. 이산적이라서..
```